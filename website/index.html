<!DOCTYPE html>
<html>
<head>
<link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/images/icons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/images/icons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/images/icons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
<link rel="manifest" href="/images/icons/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" type="text/css" href="style.css">
<link href="https://fonts.googleapis.com/css?family=Barlow" rel="stylesheet">
<script type="text/javascript" src="jss/jquery-3.3.1.min.js"></script>
<script>
var curClass ="";
var curAssign ="";
$(document).ready(function(){
	$(".fileUp").click(function(){
		if(curAssign !="" && curClass != ""){
			var form_data = new FormData(document.getElementById(curAssign));
			form_data.append('class', curClass);
			form_data.append('assignment', curAssign);
			form_data.append('action', 'upload');
			$.ajax({
				url: 'php/upload.php',
				type: 'POST',
				dataType: 'text',
				cache: false,
				contentType: false,
				processData: false,
				data: form_data,
				success: function(){
					return true;
				}
			});
		}else if(curClass ==""){
			alert("Please select a class and assigenmnet before trying to upload a gradescript");
		}else{
			var form_data = new FormData(document.getElementById(curClass));
			form_data.append('class', curClass);
			form_data.append('action', 'upload');
			$.ajax({
				url: 'php/upload.php',
				type: 'POST',
				dataType: 'text',
				cache: false,
				contentType: false,
				processData: false,
				data: form_data,
				success: function(){
					return true;
				}
			});
		}
	});
	$("option").click(function(){
		if($(this).val() == "addClass"){
			var className = prompt("Please enter your class name");
			$.ajax({url: 'php/upload.php',
					data: {action: 'addClass', name: 'className'},
					type: 'post',
					success: function(){
						return true;
					}
			});
		}else{
			curClass = $(this).val();
			$(this).attr("id",curClass);
		}
	});
	
	
});


var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function(){
	if(this.readyState == 4 && this.status == 200){
		var myObject = JSON.parse(this.responseText);
		
	}
};
</script>
</head>

<body>
	<header>
	<span id="classTtl">Classes: 
		<select>
			<option value="addClass">Add Class</option>
		</select>
		<form>
			<input type="file" name="rosterUpload" id="rosterUpload" value="">
			<label for="fileToUpload" class="fileButton">Select file</label>
			<input type="submit" value="Upload Roster" name="submit" style="float:left;width:50%;">
		</form>
		</span>
	<img src="images/logo.gif" height="80%" width="40%" style="margin-left: 16%;float:left;">
	</header>
	<aside id="assignment">
		<div id="asgnD1" class="assignment">
		<form action="" method="post" enctype="multipart/form-data" id="asgnF1" >
			<span class="assignmentTitle" id="asgnT1">Test Assignment:</span>
			<input type="file" name="fileToUpload" id="fileToUpload" value="">
			<label for="fileToUpload" class="fileButton">Select file</label>
			<button class="assignmentButton" id="asgnS1">Select</button>
			<input type="submit" value="Upload Gradescript" name="submit" class="fileUp" id="fileUp1">
		</form>
		</div>
		<button id="addAsgn">Pull Assignment</button>
		
	</aside>
	<section id="overview">
		<div  class="student" id="student1"><span class="stdId" id="alambe22">alambe22 </span><span class="score" id="score1"> 54% </span><progress class="visGrade" id="bar1" value="53" max="100">5</progress></div>
		
	</section>
	
</body>
</html>